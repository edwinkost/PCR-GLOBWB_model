[globalOptions]


# Set the pcrglobwb output directory in an absolute path.
#~ outputDir = MAIN_OUTPUT_DIRECTORY
outputDir    = MAIN_OUTPUT_DIRECTORY


# Set the input directory map in an absolute path. 
# - The input forcing and parameter directories and files will be relative to this.
inputDir     = /scratch/depfg/sutan101/pcrglobwb_input_ulysses_v202312XX/develop_edwin/


# Map of clone (must be provided in PCRaster maps)
# - Spatial resolution and coverage are based on this map:
#~ cloneMap  = land_mask_only.map

# for parallelization
cloneMap  = /scratch/depfg/sutan101/data/pcrglobwb_input_ulysses/clone_maps/subdomains/version_2020-09-XX/clonemap_mask_%i.map
#~ # for testing, mask_25: Sumatra, 3: Nile
#~ cloneMap     = /scratch/depfg/sutan101/data/pcrglobwb_input_ulysses/clone_maps/subdomains/version_2020-09-XX/clonemap_mask_3.map


# The area/landmask of interest:
#~ landmask  = land_mask_only.map

# for parallelization
landmask    = /scratch/depfg/sutan101/data/pcrglobwb_input_ulysses/clone_maps/subdomains/version_2020-09-XX/landmask_river_and_land_mask_%i.map
#~ # for testing, mask_25: Sumatra
#~ landmask = /scratch/depfg/sutan101/data/pcrglobwb_input_ulysses/clone_maps/subdomains/version_2020-09-XX/landmask_river_and_land_mask_3.map


# netcdf attributes for output files:
institution = Department of Physical Geography, Utrecht University
title       = PCR-GLOBWB output (not coupled to MODFLOW), development version for Ulysses ; MAIN_OUTPUT_DIRECTORY
description = by Edwin H. Sutanudjaja (contact: e.h.sutanudjaja@uu.nl)


startTime = STARTING_DATE
endTime   = END_DATE


# spinning up options:
minConvForSoilSto    = 0.0
minConvForGwatSto    = 0.0
minConvForChanSto    = 0.0
minConvForTotlSto    = 0.0


# - number of spin up years
maxSpinUpsInYears    = NUM_OF_YEARS_FOR_SPINUP


# option/directory for saving the spin-up directory 
spinUpOutputDir = True


# with merging
with_merging = True
cloneAreas = GlobalUlysses


[meteoOptions]


# Method to calculate referencePotETP (reference potential evaporation+transpiration)
# options are "Hamon" and "Input" ; If "Input", the netcdf input file must be given:
referenceETPotMethod    = Input
#~ referenceETPotMethod = Hamon

#~ precipitationNC               = PRECIPITATION_FORCING_FILE
#~ temperatureNC                 = TEMPERATURE_FORCING_FILE
#~ refETPotFileNC                = REF_POT_ET_FORCING_FILE

# on eejit - not using settime
precipitationNC                  = /scratch/depfg/sutan101/data/era5land_ulysses/version_20231206_merged_1981-2022/precipitation_daily_1981-2022.nc
temperatureNC                    = /scratch/depfg/sutan101/data/era5land_ulysses/version_20231206_merged_1981-2022/tavg_daily_1981-2022.nc
refETPotFileNC                   = /scratch/depfg/sutan101/data/era5land_ulysses/version_20231206_merged_1981-2022/pet_daily_1981-2022.nc


#~ # please activate the following if you use the actual Ulysses files
#~ precipitation_file_per_month     = True
#~ temperature_file_per_month       = True
#~ refETPotFileNC_file_per_month    = True

#~ # on snellius, using file per month - NOTE that you have to use the version "20231206"
#~ precipitationNC               = /projects/0/dfguu2/users/edwin/data/era5land_ulysses/version_20231206/%04i/%02i/precipitation_daily_%02i_%04i.nc
#~ temperatureNC                 = /projects/0/dfguu2/users/edwin/data/era5land_ulysses/version_20231206/%04i/%02i/tavg_%02i_%04i.nc
#~ refETPotFileNC                = /projects/0/dfguu2/users/edwin/data/era5land_ulysses/version_20231206/%04i/%02i/pet_%02i_%04i.nc


# variable names in the forcing files (optional)
precipitationVariableName    = pre
temperatureVariableName      = tavg
referenceEPotVariableName    = pet

# conversion constants and factors to correct forcing values (optional) so that the units are in m.day-1 and degree Celcius                                                                                                           
precipitationConstant    = 0.0
precipitationFactor      = 0.001
temperatureConstant      = 0.0
temperatureFactor        = 1.0
referenceEPotConstant    = 0.0
referenceEPotFactor      = 0.001


# option to ignore small values of precipitation (default is False)
rounddownPrecipitation   = False


[landSurfaceOptions]

debugWaterBalance = True

numberOfUpperSoilLayers = 2

# topography parameters
topographyNC        = topography_parameters_6min_ulysses_v20231130_merged_covered_with_zero.nc

# soil parameters
soilPropertiesNC        = None
# - if soilPropertiesNC = None, the following soil parameters will be used
firstStorDepth          = layerDepth_average_1_global_06min.nc
secondStorDepth         = layerDepth_average_2_global_06min.nc
soilWaterStorageCap1    = WHC_average_1_global_06min.nc
soilWaterStorageCap2    = WHC_average_2_global_06min.nc
airEntryValue1          = psiAir_average_1_global_06min.nc
airEntryValue2          = psiAir_average_2_global_06min.nc
poreSizeBeta1           = BCH_average_1_global_06min.nc
poreSizeBeta2           = BCH_average_2_global_06min.nc
resVolWC1               = vmcRes_average_1_global_06min.nc
resVolWC2               = vmcRes_average_2_global_06min.nc
satVolWC1               = vmcSat_average_1_global_06min.nc
satVolWC2               = vmcSat_average_2_global_06min.nc
KSat1                   = kSat_average_1_global_06min.nc
KSat2                   = kSat_average_2_global_06min.nc
					    
percolationImp          = global_06min_impeded_drainage_permafrost_nsidc_dsmw_v20231129.nc.map

		
# option to skip extrapolation
noParameterExtrapolation = True

landCoverTypes = forest,grassland

noLandCoverFractionCorrection = False



[forestOptions]

name = forest
debugWaterBalance = True

# snow module properties
snowModuleType      =  Simple
freezingT           =  0.0
snowWaterHoldingCap =  0.1
refreezingCoeff     =  0.05
# - Sutanudjaja et al. (2011)
degreeDayFactor     =  0.0055
#~ # - (Sutanudjaja et al. 2018)
#~ degreeDayFactor  =  0.0025

# other paramater values
minTopWaterLayer  = 0.0
minCropKC         = 0.2

cropCoefficientNC = tall_crop_coefficient.nc
interceptCapNC    = tall_intercept_capacity.nc
coverFractionNC   = tall_cover_fraction.nc

landCoverMapsNC   = None
# If NC file is not provided, we have to provide the following pcraster maps:
fracVegCover      = vegf_tall.map
minSoilDepthFrac  = minf_tall.map
maxSoilDepthFrac  = maxf_tall.map
rootFraction1     = rfrac1_tall.map
rootFraction2     = rfrac2_tall.map
maxRootDepth      = maxrootdepth_tall.map
# Note: The maxRootDepth is not used for non irrigated land cover type. 	
#
# Parameters for the Arno's scheme:
arnoBeta = None
# If arnoBeta is defined, the soil water capacity distribution is based on this.
# If arnoBeta is NOT defined, maxSoilDepthFrac must be defined such that arnoBeta will be calculated based on maxSoilDepthFrac and minSoilDepthFrac.


# initial conditions:
interceptStorIni = MAIN_INITIAL_STATE_FOLDER/interceptStor_forest_DATE_FOR_INITIAL_STATES.map
snowCoverSWEIni  = MAIN_INITIAL_STATE_FOLDER/snowCoverSWE_forest_DATE_FOR_INITIAL_STATES.map
snowFreeWaterIni = MAIN_INITIAL_STATE_FOLDER/snowFreeWater_forest_DATE_FOR_INITIAL_STATES.map
topWaterLayerIni = MAIN_INITIAL_STATE_FOLDER/topWaterLayer_forest_DATE_FOR_INITIAL_STATES.map
storUppIni       = MAIN_INITIAL_STATE_FOLDER/storUpp_forest_DATE_FOR_INITIAL_STATES.map
storLowIni       = MAIN_INITIAL_STATE_FOLDER/storLow_forest_DATE_FOR_INITIAL_STATES.map
interflowIni     = MAIN_INITIAL_STATE_FOLDER/interflow_forest_DATE_FOR_INITIAL_STATES.map


# option to skip extrapolation
noParameterExtrapolation = True


[grasslandOptions]

name = grassland
debugWaterBalance = True

# snow module properties
snowModuleType      =  Simple
freezingT           =  0.0
snowWaterHoldingCap =  0.1
refreezingCoeff     =  0.05
#
# - Sutanudjaja et al. (2011)
degreeDayFactor     =  0.0055
#~ # - (Sutanudjaja et al. 2018)
#~ degreeDayFactor  =  0.0025


# other paramater values
minTopWaterLayer  = 0.0
minCropKC         = 0.2

cropCoefficientNC = short_crop_coefficient.nc
interceptCapNC    = short_intercept_capacity.nc
coverFractionNC   = short_cover_fraction.nc


landCoverMapsNC   = None
# If NC file is not provided, we have to provide the following pcraster maps:
fracVegCover      = vegf_short.map
minSoilDepthFrac  = minf_short.map
maxSoilDepthFrac  = maxf_short.map
rootFraction1     = rfrac1_short.map
rootFraction2     = rfrac2_short.map
maxRootDepth      = maxrootdepth_short.map
# Note: The maxRootDepth is not used for non irrigated land cover type. 	
#
# Parameters for the Arno's scheme:
arnoBeta = None
# If arnoBeta is defined, the soil water capacity distribution is based on this.
# If arnoBeta is NOT defined, maxSoilDepthFrac must be defined such that arnoBeta will be calculated based on maxSoilDepthFrac and minSoilDepthFrac.


# initial conditions:
interceptStorIni = MAIN_INITIAL_STATE_FOLDER/interceptStor_grassland_DATE_FOR_INITIAL_STATES.map
snowCoverSWEIni  = MAIN_INITIAL_STATE_FOLDER/snowCoverSWE_grassland_DATE_FOR_INITIAL_STATES.map
snowFreeWaterIni = MAIN_INITIAL_STATE_FOLDER/snowFreeWater_grassland_DATE_FOR_INITIAL_STATES.map
topWaterLayerIni = MAIN_INITIAL_STATE_FOLDER/topWaterLayer_grassland_DATE_FOR_INITIAL_STATES.map
storUppIni       = MAIN_INITIAL_STATE_FOLDER/storUpp_grassland_DATE_FOR_INITIAL_STATES.map
storLowIni       = MAIN_INITIAL_STATE_FOLDER/storLow_grassland_DATE_FOR_INITIAL_STATES.map
interflowIni     = MAIN_INITIAL_STATE_FOLDER/interflow_grassland_DATE_FOR_INITIAL_STATES.map


# option to skip extrapolation
noParameterExtrapolation = True



[groundwaterOptions]

debugWaterBalance       = True

groundwaterPropertiesNC = None
# If None, the following files must be defined.  
recessionCoeff = recession_coefficient_06min_filled_v20231205.map
specificYield  = specific_yield_aquifer_06min_filled_v20231205.map
kSatAquifer    = k_conductivity_aquifer_06min_filled_v20231205.map    

# minimum value for groundwater recession coefficient (day-1) 
# - about 11 years
minRecessionCoeff = 0.00025
#~ # - about 27 years
#~ minRecessionCoeff = 1.0e-4


# exponent in baseflow reservoir formula (default is one)
#~ baseflow_exponent = 1.0
#~ baseflow_exponent = BASEFLOW_EXPONENT
baseflow_exponent    = 1.5


doNotExtrapolateThickness = True
noParameterExtrapolation  = True


# initial conditions:
storGroundwaterIni                        = MAIN_INITIAL_STATE_FOLDER/storGroundwater_DATE_FOR_INITIAL_STATES.map
avgStorGroundwaterIni                     = MAIN_INITIAL_STATE_FOLDER/avgStorGroundwater_DATE_FOR_INITIAL_STATES.map
#~ #
# for a naturalized run, we can ignore the following
storGroundwaterFossilIni                  = 0.0
#
# additional initial conditions for pumping behaviors
avgNonFossilGroundwaterAllocationLongIni  = 0.0
avgNonFossilGroundwaterAllocationShortIni = 0.0
avgTotalGroundwaterAbstractionIni         = 0.0
avgTotalGroundwaterAllocationLongIni      = 0.0
avgTotalGroundwaterAllocationShortIni     = 0.0
#
# additional initial conditions (needed only for MODFLOW run) 
relativeGroundwaterHeadIni                = MAIN_INITIAL_STATE_FOLDER/relativeGroundwaterHead_DATE_FOR_INITIAL_STATES.map
baseflowIni                               = MAIN_INITIAL_STATE_FOLDER/baseflow_DATE_FOR_INITIAL_STATES.map

#~ # - estimate storGroundwaterIni from average groundwater recharge (unit: m/day)
#~ storGroundwaterIni                     = ESTIMATE_FROM_DAILY_GROUNDWATER_RECHARGE_RATE
#~ dailyGroundwaterRechargeIni            = DAILY_GROUNDWATER_RECHARGE_FOR_INITIAL_CONDITION


[routingOptions]

debugWaterBalance = True

# drainage direction map
#~ lddMap   = 5.0
lddMap      = lddsound_06min_version_202007XX_for_ulysses.map

# cell area (unit: m2)
cellAreaMap = cellarea.map

# routing method:
routingMethod = accuTravelTime

# manning coefficient
manningsN   = 0.04

# Option for flood plain simulation
dynamicFloodPlain = False


# channel gradient
gradient             = gradient_channel_parameters_6min_ulysses_v20231130_merged.nc.map

# constant channel depth 
constantChannelDepth = bankfull_depth_channel_parameters_6min_ulysses_v20231130_merged.nc.map

# constant channel width (optional)
constantChannelWidth = bankfull_width_channel_parameters_6min_ulysses_v20231130_merged.nc.map

# minimum channel width (optional)
minimumChannelWidth  = bankfull_width_channel_parameters_6min_ulysses_v20231130_merged.nc.map

# channel properties for flooding
bankfullCapacity     = None
# - If None, it will be estimated from (bankfull) channel depth (m) and width (m) 


# composite crop factors for WaterBodies: 
cropCoefficientWaterNC = cropCoefficientForOpenWater.nc
minCropWaterKC         = 1.00


# lake and reservoir parameters
includeWaterBodies     = True
waterBodyInputNC       = lakes_and_reservoirs_06min_global_version_july_2020_for_ulysses.nc
onlyNaturalWaterBodies = False


# the following options are needed to cover runoff and open water evaporation fields with zero if there are missing values in meteo forcing data (e.g. required by Ulysses project that somehow masked out lakes, etc)
cover_runoff_and_open_water_evaporation = True


# initial conditions:
waterBodyStorageIni            = MAIN_INITIAL_STATE_FOLDER/waterBodyStorage_DATE_FOR_INITIAL_STATES.map
channelStorageIni              = MAIN_INITIAL_STATE_FOLDER/channelStorage_DATE_FOR_INITIAL_STATES.map
readAvlChannelStorageIni       = MAIN_INITIAL_STATE_FOLDER/readAvlChannelStorage_DATE_FOR_INITIAL_STATES.map
avgDischargeLongIni            = MAIN_INITIAL_STATE_FOLDER/avgDischargeLong_DATE_FOR_INITIAL_STATES.map
avgDischargeShortIni           = MAIN_INITIAL_STATE_FOLDER/avgDischargeShort_DATE_FOR_INITIAL_STATES.map
m2tDischargeLongIni            = MAIN_INITIAL_STATE_FOLDER/m2tDischargeLong_DATE_FOR_INITIAL_STATES.map
avgBaseflowLongIni             = MAIN_INITIAL_STATE_FOLDER/avgBaseflowLong_DATE_FOR_INITIAL_STATES.map
riverbedExchangeIni            = MAIN_INITIAL_STATE_FOLDER/riverbedExchange_DATE_FOR_INITIAL_STATES.map
#
# initial condition of sub-time step discharge (needed for estimating number of time steps in kinematic wave methods)
subDischargeIni                = MAIN_INITIAL_STATE_FOLDER/subDischarge_DATE_FOR_INITIAL_STATES.map
#
avgLakeReservoirInflowShortIni = MAIN_INITIAL_STATE_FOLDER/avgLakeReservoirInflowShort_DATE_FOR_INITIAL_STATES.map
avgLakeReservoirOutflowLongIni = MAIN_INITIAL_STATE_FOLDER/avgLakeReservoirOutflowLong_DATE_FOR_INITIAL_STATES.map
#
# number of days (timesteps) that have been performed for spinning up initial conditions in the routing module (i.e. channelStorageIni, avgDischargeLongIni, avgDischargeShortIni, etc.)
timestepsToAvgDischargeIni     = MAIN_INITIAL_STATE_FOLDER/timestepsToAvgDischarge_DATE_FOR_INITIAL_STATES.map
# Note that: 
# - maximum number of days (timesteps) to calculate long term average flow values (default: 5 years = 5 * 365 days = 1825)
# - maximum number of days (timesteps) to calculate short term average values (default: 1 month = 1 * 30 days = 30)



[reportingOptions]

# landmask for reporting
#~ landmask_for_reporting = global_06min/cloneMaps/global_land_mask/version_2020-08-11/land_mask_only.map
#~ landmask_for_reporting = global_06min/cloneMaps/subdomains/version_2020-09-XX/landmask_land_mask_%i.map
#~ landmask_for_reporting = global_06min/cloneMaps/subdomains/version_2020-09-XX/landmask_river_and_land_mask_%i.map

#~ # for parallelization
landmask_for_reporting = /scratch/depfg/sutan101/data/pcrglobwb_input_ulysses/clone_maps/subdomains/version_2020-09-XX/landmask_land_mask_%i.map

#~ landmask_for_reporting = /scratch/depfg/sutan101/data/pcrglobwb_input_ulysses/clone_maps/subdomains/version_2020-09-XX/landmask_land_mask_3.map

# output files that will be written in the disk in netcdf files:
# - daily resolution
#~ outDailyTotNC = ulyssesP,ulyssesET,ulyssesSWE,ulyssesQsm,ulyssesSM,ulyssesQrRunoff,ulyssesDischarge,ulyssessRefPET,ulyssessCropPET,ulyssesSnowFraction,ulyssesSMUpp,temperature
outDailyTotNC = None
# - monthly resolution
outMonthTotNC = precipitation,actualET,runoff,totalRunoff
outMonthAvgNC = ulyssesP,ulyssesET,ulyssesSWE,ulyssesQsm,ulyssesSM,ulyssesQrRunoff,ulyssesDischarge,ulyssessRefPET,ulyssessCropPET,ulyssesSnowFraction,ulyssesSMUpp,temperature,discharge
outMonthEndNC = None
# - annual resolution
outAnnuaTotNC = precipitation,actualET,runoff,totalRunoff
outAnnuaAvgNC = temperature,discharge,gwRecharge,runoff,totalRunoff
outAnnuaEndNC = surfaceWaterStorage,interceptStor,snowFreeWater,snowCoverSWE,topWaterLayer,storUppTotal,storLowTotal,storGroundwater,storGroundwaterFossil,totalWaterStorageThickness
#~ outAnnuaTotNC = None
#~ outAnnuaAvgNC = None
#~ outAnnuaEndNC = None
# - monthly and annual maxima
outMonthMaxNC = None
outAnnuaMaxNC = None

#~ # netcdf format and zlib setup
#~ formatNetCDF = NETCDF4
#~ zlib = True

# option to save states at the end of every month
save_monthly_end_states = True


[mergingOutputOptions]

# output variables/files that will be merged:
outDailyTotNC = None
# - monthly resolution
outMonthTotNC = precipitation,actualET,runoff,totalRunoff
outMonthAvgNC = ulyssesP,ulyssesET,ulyssesSWE,ulyssesQsm,ulyssesSM,ulyssesQrRunoff,ulyssesDischarge,ulyssessRefPET,ulyssessCropPET,ulyssesSnowFraction,ulyssesSMUpp,temperature,discharge
outMonthEndNC = None
# - annual resolution
outAnnuaTotNC = precipitation,actualET,runoff,totalRunoff
outAnnuaAvgNC = temperature,discharge,gwRecharge,runoff,totalRunoff
outAnnuaEndNC = surfaceWaterStorage,interceptStor,snowFreeWater,snowCoverSWE,topWaterLayer,storUppTotal,storLowTotal,storGroundwater,storGroundwaterFossil,totalWaterStorageThickness
#~ outAnnuaTotNC = None
#~ outAnnuaAvgNC = None
#~ outAnnuaEndNC = None
# - monthly and annual maxima
outMonthMaxNC = None
outAnnuaMaxNC = None

# netcdf format and zlib setup
formatNetCDF = NETCDF4
zlib = True

# the intended (merged) global clone map
#~ cloneMap = /scratch/depfg/sutan101/pcrglobwb_input_ulysses_v202312XX/develop_edwin/land_mask_only.map
cloneMap    = land_mask_only.map


[prefactorOptions]

#~ log_10_multiplier_for_recessionCoeff = SQUARE_ROOT
log_10_multiplier_for_recessionCoeff    = LOG_10_MULTIPLIER_FOR_RECESSION_COEFF


[modificationBasedOnSystemArgumentOptions]

# provide a list of system arguments and their corresponding strings that will be replaced in this configuration file
-mod          = MAIN_OUTPUT_DIRECTORY
-sd           = STARTING_DATE   
-ed           = END_DATE
-noyfsu       = NUM_OF_YEARS_FOR_SPINUP
-pff          = PRECIPITATION_FORCING_FILE
-tff          = TEMPERATURE_FORCING_FILE
-rpetff       = REF_POT_ET_FORCING_FILE
-misf         = MAIN_INITIAL_STATE_FOLDER  
-dfis         = DATE_FOR_INITIAL_STATES  
-bfexp        = BASEFLOW_EXPONENT
-log10mfksat  = LOG_10_MULTIPLIER_FOR_KSAT
-log10mfreccf = LOG_10_MULTIPLIER_FOR_RECESSION_COEFF

